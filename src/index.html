<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="./main.js" type="module"></script>
    <link rel="stylesheet" href="./styles.css">
    <title>Tableto Indicadores</title>
</head>

<body>
    <div id="navbarContainer"></div>
    <div class="container">
        <div class="card text-center">
            <div class="card-body">
                <h3 class="card-title">Tablero de Indicadores</h3>
                <h3 class="card-subtitle">(Servicios)</h3>
            </div>
        </div>
    </div>

    <div class="container py-5">
        <table class="table" id="myTable">
            <thead>
                <tr>
                    <th scope="col">Turno</th>
                    <th scope="col">Unidades</th>
                    <th scope="col">Pesos</th>
                    <th scope="col">Mezcla</th>
                    <th scope="col">%</th>
                    <th scope="col">Productividad<br class="text-wrap">Interior</th>
                    <th scope="col">Productividad<br class="text-wrap">Exterior</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th scope="row">Turno 1</th>
                    <td>2051</td>
                    <td>$252,940.00</td>
                    <td>$123.33</td>
                    <td>41.43%</td>
                    <td>15.42</td>
                    <td>17.99</td>
                </tr>
                <tr>
                    <th scope="row">Turno 2</th>
                    <td>2171</td>
                    <td>$258,428.00</td>
                    <td>$119.04</td>
                    <td>43.86%</td>
                    <td>16.32</td>
                    <td>19.04</td>
                </tr>
                <tr>
                    <th scope="row">Turno 3</th>
                    <td>728</td>
                    <td>$85,760.00</td>
                    <td>$117.80</td>
                    <td>14.71%</td>
                    <td>19.16</td>
                    <td>19.16</td>
                </tr>
                <tr class="table-info">
                    <th scope="row">Total</th>
                    <th>4950</th>
                    <th>$597,128.00</th>
                    <th>$120.63</th>
                    <th>100%</th>
                </tr>
            </tbody>
        </table>

        <script>
            // Obtener todas las filas de la tabla
            var tableRows = document.querySelectorAll("#myTable tbody tr");

            // Inicializar las variables para almacenar los totales
            var totalUnidades = 0;
            var totalPesos = 0;
            var totalMezcla = 0;
            var totalPorcentaje = 0;
            var totalInterior = 0;
            var totalExterior = 0;

            // Calcular los totales
            for (var i = 0; i < tableRows.length - 1; i++) {
                var row = tableRows[i];

                // Obtener los valores de cada celda
                var unidades = parseInt(row.cells[1].textContent);
                var pesos = parseFloat(row.cells[2].textContent.replace(/[^0-9.-]+/g, ""));
                var mezcla = parseFloat(row.cells[3].textContent.replace(/[^0-9.-]+/g, ""));
                var porcentaje = parseFloat(row.cells[4].textContent);
                var interior = parseFloat(row.cells[5].textContent);
                var exterior = parseFloat(row.cells[6].textContent);

                // Sumar los valores a los totales
                totalUnidades += unidades;
                totalPesos += pesos;
                totalMezcla += mezcla / 3;
                totalPorcentaje += porcentaje;
                totalInterior += interior;
                totalExterior += exterior;
            }

            // Actualizar los resultados en la fila del "Total"
            var totalRow = tableRows[tableRows.length - 1];
            totalRow.cells[1].textContent = totalUnidades;
            totalRow.cells[2].textContent = "$" + totalPesos.toFixed(2);
            totalRow.cells[3].textContent = "$" + totalMezcla.toFixed(2);
            totalRow.cells[4].textContent = totalPorcentaje.toFixed(2) + "%";
            totalRow.cells[5].textContent = totalInterior.toFixed(2);
            totalRow.cells[6].textContent = totalExterior.toFixed(2);

        </script>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
</body>

</html>